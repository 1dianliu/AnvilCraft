package dev.dubhe.anvilcraft.mixin;

import com.google.common.collect.ImmutableMap;
import com.mojang.datafixers.DataFixerBuilder;
import com.mojang.datafixers.schemas.Schema;
import dev.dubhe.anvilcraft.datafix.AnvilCraftV141Schema;
import dev.dubhe.anvilcraft.datafix.AutoCrafterRenameFix;
import net.minecraft.util.datafix.DataFixers;
import org.spongepowered.asm.mixin.Final;
import org.spongepowered.asm.mixin.Mixin;
import org.spongepowered.asm.mixin.Shadow;
import org.spongepowered.asm.mixin.injection.At;
import org.spongepowered.asm.mixin.injection.Inject;
import org.spongepowered.asm.mixin.injection.callback.CallbackInfo;
import org.spongepowered.asm.mixin.injection.callback.LocalCapture;

import java.util.Map;
import java.util.function.BiFunction;
import java.util.function.UnaryOperator;

@Mixin(DataFixers.class)
public class DataFixersMixin {
    @Shadow @Final private static BiFunction<Integer, Schema, Schema> SAME_NAMESPACED;

    @Inject(method = "addFixers",
            at = @At("RETURN"),
            locals = LocalCapture.CAPTURE_FAILHARD)
    private static void registerFixer(
            DataFixerBuilder builder,
            CallbackInfo ci,
            Schema schema,
            Schema schema2,
            Schema schema3,
            Schema schema4,
            Schema schema5,
            Schema schema6,
            Schema schema7,
            Schema schema8,
            Schema schema9,
            Schema schema10,
            Schema schema11,
            Schema schema12,
            Schema schema13,
            Schema schema14,
            Schema schema15,
            Schema schema16,
            Schema schema17,
            Schema schema18,
            Schema schema19,
            Schema schema20,
            Schema schema21,
            Schema schema22,
            Schema schema23,
            Schema schema24,
            Schema schema25,
            Schema schema26,
            Schema schema27,
            Schema schema28,
            Schema schema29,
            Schema schema30,
            Schema schema31,
            Schema schema32,
            Schema schema33,
            Schema schema34,
            Schema schema35,
            Schema schema36,
            Schema schema37,
            Schema schema38,
            Schema schema39,
            Schema schema40,
            Schema schema41,
            Schema schema42,
            Schema schema43,
            Schema schema44,
            Schema schema45,
            Schema schema46,
            Schema schema47,
            Schema schema48,
            Schema schema49,
            Schema schema50,
            Schema schema51,
            Schema schema52,
            Schema schema53,
            Schema schema54,
            Schema schema55,
            Schema schema56,
            Schema schema57,
            Schema schema58,
            Schema schema59,
            Schema schema60,
            Schema schema61,
            Schema schema62,
            Schema schema63,
            Schema schema64,
            Schema schema65,
            Schema schema66,
            Schema schema67,
            Schema schema68,
            Schema schema69,
            Schema schema70,
            Schema schema71,
            Schema schema72,
            Schema schema73,
            Schema schema74,
            Schema schema75,
            Schema schema76,
            Schema schema77,
            Schema schema78,
            Schema schema79,
            Schema schema80,
            Schema schema81,
            Schema schema82,
            Schema schema83,
            Schema schema84,
            Schema schema85,
            Schema schema86,
            Schema schema87,
            Schema schema88,
            Schema schema89,
            Schema schema90,
            Schema schema91,
            Schema schema92,
            Schema schema93,
            Schema schema94,
            Schema schema95,
            Schema schema96,
            Schema schema97,
            UnaryOperator<String> unaryOperator,
            Schema schema98,
            Schema schema99,
            Schema schema100,
            Schema schema101,
            Schema schema102,
            Schema schema103,
            Schema schema104,
            Schema schema105,
            Schema schema106,
            Schema schema107,
            Schema schema108,
            Schema schema109,
            Schema schema110,
            Schema schema111,
            Schema schema112,
            Schema schema113,
            Schema schema114,
            Schema schema115,
            Schema schema116,
            Schema schema117,
            Schema schema118,
            Schema schema119,
            Schema schema120,
            Schema schema121,
            Schema schema122,
            Schema schema123,
            Schema schema124,
            Schema schema125,
            Schema schema126,
            Schema schema127,
            Schema schema128,
            Schema schema129,
            Schema schema130,
            Schema schema131,
            ImmutableMap<String, String> immutableMap,
            Schema schema132,
            ImmutableMap<String, String> immutableMap2,
            Schema schema133,
            Schema schema134,
            ImmutableMap<String, String> immutableMap3,
            Schema schema135,
            Schema schema136,
            Schema schema137,
            Schema schema138,
            Schema schema139,
            Schema schema140,
            Schema schema141,
            Schema schema142,
            Schema schema143,
            Schema schema144,
            Schema schema145,
            Schema schema146,
            Schema schema147,
            Schema schema148,
            Schema schema149,
            Schema schema150,
            Schema schema151,
            Schema schema152,
            Schema schema153,
            Schema schema154,
            Schema schema155,
            Schema schema156,
            Schema schema157,
            Schema schema158,
            Schema schema159,
            Schema schema160,
            Schema schema161,
            ImmutableMap<String, String> immutableMap4,
            Schema schema162,
            Schema schema163,
            Schema schema164,
            Schema schema165,
            Schema schema166,
            Map<String, String> map,
            Schema schema167,
            Schema schema168,
            Schema schema169,
            Schema schema170,
            Schema schema171,
            Schema schema172,
            Schema schema173,
            Schema schema174,
            Schema schema175,
            Schema schema176,
            Schema schema177,
            Schema schema178,
            Schema schema179,
            Schema schema180,
            Schema schema181,
            Schema schema182,
            Schema schema183,
            Schema schema184,
            Schema schema185,
            Schema schema186,
            Schema schema187,
            Schema schema188) {
        Schema sc = builder.addSchema(3465, AnvilCraftV141Schema::new);
        builder.addFixer(new AutoCrafterRenameFix(sc));

    }
}
